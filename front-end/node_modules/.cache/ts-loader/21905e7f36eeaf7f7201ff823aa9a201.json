{"remainingRequest":"/home/ulrich/neuron-dashboard/node_modules/thread-loader/dist/cjs.js!/home/ulrich/neuron-dashboard/node_modules/babel-loader/lib/index.js!/home/ulrich/neuron-dashboard/node_modules/ts-loader/index.js??ref--14-3!/home/ulrich/neuron-dashboard/src/composables/config/useSubscription.ts","dependencies":[{"path":"/home/ulrich/neuron-dashboard/src/composables/config/useSubscription.ts","mtime":1708521072003},{"path":"/home/ulrich/neuron-dashboard/babel.config.js","mtime":1708521072003},{"path":"/home/ulrich/neuron-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1705331057500},{"path":"/home/ulrich/neuron-dashboard/node_modules/thread-loader/dist/cjs.js","mtime":1705331057587},{"path":"/home/ulrich/neuron-dashboard/node_modules/babel-loader/lib/index.js","mtime":1705331057465},{"path":"/home/ulrich/neuron-dashboard/node_modules/ts-loader/index.js","mtime":1705331079456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL3VscmljaC9uZXVyb24tZGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdWxyaWNoL25ldXJvbi1kYXNoYm9hcmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvdWxyaWNoL25ldXJvbi1kYXNoYm9hcmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50ZXN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCB7IGFkZFN1YnNjcmlwdGlvbiwgYWRkU3Vic2NyaXB0aW9ucywgZGVsZXRlU3Vic2NyaXB0aW9uLCB1cGRhdGVTdWJzY3JpcHRpb24sIHF1ZXJ5R3JvdXBMaXN0LCBxdWVyeVN1YnNjcmlwdGlvbiB9IGZyb20gJ0AvYXBpL2NvbmZpZyc7CmltcG9ydCB7IHJlZiwgY29tcHV0ZWQsIG5leHRUaWNrIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgRW1xeE1lc3NhZ2UgfSBmcm9tICdAZW1xeC9lbXF4LXVpJzsKaW1wb3J0IHsgTWVzc2FnZUJveENvbmZpcm0gfSBmcm9tICdAL3V0aWxzL2VsZW1lbnQnOwppbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAndnVlLWkxOG4nOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgdXNlU291dGhEcml2ZXIgZnJvbSAnLi91c2VTb3V0aERyaXZlcic7CmltcG9ydCB7IGNyZWF0ZUNvbW1vbkVycm9yTWVzc2FnZSwgT21pdEFycmF5RmllbGRzIH0gZnJvbSAnQC91dGlscy91dGlscyc7CmltcG9ydCB7IEVOX05VTUJFUl9SRUdFWCB9IGZyb20gJ0AvdXRpbHMvcmVnZXhwcyc7CmltcG9ydCB7IHVzZURyaXZlckluZm8gfSBmcm9tICdAL2NvbXBvc2FibGVzL2NvbmZpZy91c2VEcml2ZXInOwppbXBvcnQgeyBjbG9uZURlZXAsIG9taXQgfSBmcm9tICdsb2Rhc2gnOwpleHBvcnQgdmFyIHVzZVN1YnNjcmlwdGlvbkxpc3QgPSBmdW5jdGlvbiB1c2VTdWJzY3JpcHRpb25MaXN0KCkgewogIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CgogIHZhciBfdXNlSTE4biA9IHVzZUkxOG4oKSwKICAgICAgdCA9IF91c2VJMThuLnQ7CgogIHZhciBpc0xpc3RMb2FkaW5nID0gcmVmKGZhbHNlKTsKICB2YXIgc3Vic2NyaXB0aW9uTGlzdCA9IHJlZihbXSk7CiAgdmFyIGlzRWRpdEdyb3VwID0gcmVmKGZhbHNlKTsKICB2YXIgc2hvd0VkaXRHcm91cERhaWxvZyA9IHJlZihmYWxzZSk7CiAgdmFyIGlzU3VibWl0dGluZyA9IHJlZihmYWxzZSk7CiAgdmFyIGVkaXRHcm91cEZvcm0gPSByZWYoewogICAgYXBwOiAnJywKICAgIGRyaXZlcjogJycsCiAgICBncm91cDogJycsCiAgICBwYXJhbXM6IHsKICAgICAgdG9waWM6ICcnLAogICAgICBwcm9kdWN0S2V5OiAnJwogICAgfQogIH0pOwogIHZhciBub2RlID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHJvdXRlLnBhcmFtcy5ub2RlLnRvU3RyaW5nKCk7CiAgfSk7CiAgdmFyIGFsbENoZWNrZWQgPSBjb21wdXRlZCh7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHN1YnNjcmlwdGlvbkxpc3QudmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gc3Vic2NyaXB0aW9uTGlzdC52YWx1ZS5ldmVyeShmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBjaGVja2VkID0gX3JlZi5jaGVja2VkOwogICAgICAgIHJldHVybiBjaGVja2VkOwogICAgICB9KTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgc3Vic2NyaXB0aW9uTGlzdC52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5jaGVja2VkID0gdmFsOwogICAgICB9KTsKICAgIH0KICB9KTsKICB2YXIgc3ViQ2hlY2tlZExpc3QgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgY2hlY2tlZExpc3QgPSBzdWJzY3JpcHRpb25MaXN0LnZhbHVlLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5jaGVja2VkOwogICAgfSk7CiAgICB2YXIgbmV3Q2hlY2tlZExpc3QgPSBPbWl0QXJyYXlGaWVsZHMoY2hlY2tlZExpc3QsIFsnY2hlY2tlZCddKTsKICAgIHJldHVybiBuZXdDaGVja2VkTGlzdDsKICB9KTsKCiAgdmFyIGdldFN1YnNjcmlwdGlvbkxpc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgbGlzdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlzTGlzdExvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBxdWVyeVN1YnNjcmlwdGlvbihub2RlLnZhbHVlKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBsaXN0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBzdWJzY3JpcHRpb25MaXN0LnZhbHVlID0gbGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGl0ZW0sIHsKICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlzTGlzdExvYWRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbkxpc3QoKSB7CiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciB1bnN1YnNjcmliZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbmZpcm1UZXh0LCBkYXRhKSB7CiAgICAgIHZhciByZXF1ZXN0TGlzdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlQm94Q29uZmlybShjb25maXJtVGV4dCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJlcXVlc3RMaXN0ID0gZGF0YS5tYXAoZnVuY3Rpb24gKGdyb3VwSXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZVN1YnNjcmlwdGlvbihncm91cEl0ZW0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVxdWVzdExpc3QpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlU3Vic2NyaXB0aW9uKGRhdGEpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBFbXF4TWVzc2FnZS5zdWNjZXNzKHQoJ2NvbW1vbi5vcGVyYXRlU3VjY2Vzc2Z1bGx5JykpOwogICAgICAgICAgICAgIGdldFN1YnNjcmlwdGlvbkxpc3QoKTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE1OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTVdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHVuc3Vic2NyaWJlR3JvdXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhncm91cCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB1bnN1YnNjcmliZSh0KCdjb25maWcudW5zdWJzY3JpYmVHcm91cENvbmZpcm0nKSwgT21pdEFycmF5RmllbGRzKFtncm91cF0sIFsnY2hlY2tlZCddKSkpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZUdyb3VwKF94MykgewogICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgY2xlYXJTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiBjbGVhclN1YnNjcmlwdGlvbigpIHsKICAgIHJldHVybiB1bnN1YnNjcmliZSh0KCdjb25maWcuY2xlYXJTdWJzY3JpcHRpb25Db25maXJtJyksIE9taXRBcnJheUZpZWxkcyhzdWJzY3JpcHRpb25MaXN0LnZhbHVlLCBbJ2NoZWNrZWQnXSkpOwogIH07CgogIHZhciBiYXRjaFVuc3Vic2NyaWJlR3JvdXBzID0gZnVuY3Rpb24gYmF0Y2hVbnN1YnNjcmliZUdyb3VwcygpIHsKICAgIHJldHVybiB1bnN1YnNjcmliZSh0KCdjb25maWcudW5zdWJzY3JpYmVJbkJ1bGtDb25maXJtJyksIHN1YkNoZWNrZWRMaXN0LnZhbHVlKTsKICB9OwoKICB2YXIgc2hvd0VkaXRHcm91cERpYWxvZyA9IGZ1bmN0aW9uIHNob3dFZGl0R3JvdXBEaWFsb2coZ3JvdXApIHsKICAgIHZhciBncm91cERhdGEgPSBjbG9uZURlZXAoZ3JvdXApOwogICAgaXNFZGl0R3JvdXAudmFsdWUgPSB0cnVlOwogICAgc2hvd0VkaXRHcm91cERhaWxvZy52YWx1ZSA9IHRydWU7CiAgICBlZGl0R3JvdXBGb3JtLnZhbHVlID0gb21pdChncm91cERhdGEsIFsnY2hlY2tlZCddKTsKICB9OwoKICB2YXIgdXBkYXRlR3JvdXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChkYXRhKSB7CiAgICAgIHZhciBwYXJhbXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAwOwogICAgICAgICAgICAgIGlzU3VibWl0dGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgcGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKSwge30sIHsKICAgICAgICAgICAgICAgIGFwcDogbm9kZS52YWx1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHNob3dFZGl0R3JvdXBEYWlsb2cudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICBFbXF4TWVzc2FnZS5zdWNjZXNzKHQoJ2NvbW1vbi5zdWJtaXRTdWNjZXNzJykpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlU3Vic2NyaXB0aW9uKHBhcmFtcyk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgZ2V0U3Vic2NyaXB0aW9uTGlzdCgpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQ0LnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMzsKICAgICAgICAgICAgICBpc1N1Ym1pdHRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmZpbmlzaCgxMyk7CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMCwgMTAsIDEzLCAxNl1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlR3JvdXAoX3g0KSB7CiAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIGdldFN1YnNjcmlwdGlvbkxpc3QoKTsKICByZXR1cm4gewogICAgbm9kZTogbm9kZSwKICAgIHN1YnNjcmlwdGlvbkxpc3Q6IHN1YnNjcmlwdGlvbkxpc3QsCiAgICBzdWJDaGVja2VkTGlzdDogc3ViQ2hlY2tlZExpc3QsCiAgICBpc0xpc3RMb2FkaW5nOiBpc0xpc3RMb2FkaW5nLAogICAgYWxsQ2hlY2tlZDogYWxsQ2hlY2tlZCwKICAgIGdldFN1YnNjcmlwdGlvbkxpc3Q6IGdldFN1YnNjcmlwdGlvbkxpc3QsCiAgICB1bnN1YnNjcmliZUdyb3VwOiB1bnN1YnNjcmliZUdyb3VwLAogICAgY2xlYXJTdWJzY3JpcHRpb246IGNsZWFyU3Vic2NyaXB0aW9uLAogICAgYmF0Y2hVbnN1YnNjcmliZUdyb3VwczogYmF0Y2hVbnN1YnNjcmliZUdyb3VwcywKICAgIGlzRWRpdEdyb3VwOiBpc0VkaXRHcm91cCwKICAgIHNob3dFZGl0R3JvdXBEYWlsb2c6IHNob3dFZGl0R3JvdXBEYWlsb2csCiAgICBzaG93RWRpdEdyb3VwRGlhbG9nOiBzaG93RWRpdEdyb3VwRGlhbG9nLAogICAgZWRpdEdyb3VwRm9ybTogZWRpdEdyb3VwRm9ybSwKICAgIHVwZGF0ZUdyb3VwOiB1cGRhdGVHcm91cCwKICAgIGlzU3VibWl0dGluZzogaXNTdWJtaXR0aW5nCiAgfTsKfTsKZXhwb3J0IHZhciB1c2VTdWJzY3JpcHRpb25Hcm91cCA9IGZ1bmN0aW9uIHVzZVN1YnNjcmlwdGlvbkdyb3VwKCkgewogIHZhciBfdXNlSTE4bjIgPSB1c2VJMThuKCksCiAgICAgIHQgPSBfdXNlSTE4bjIudDsKCiAgdmFyIGNoZWNrRHJpdmVyR3JvdXBzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIHZhciBrZXlzLCB2YWx1ZXMsIGlzQWxsRW1wdHk7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTsKICAgICAgICAgICAgICB2YWx1ZXMgPSBPYmplY3QudmFsdWVzKHZhbHVlKTsKICAgICAgICAgICAgICBpc0FsbEVtcHR5ID0gdmFsdWVzLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiAhKHZhbCAhPT0gbnVsbCAmJiB2YWwgIT09IHZvaWQgMCAmJiB2YWwubGVuZ3RoKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKCFrZXlzLmxlbmd0aCB8fCBpc0FsbEVtcHR5KSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodCgnY29uZmlnLnN1YnNjcmliZVNvdXRoRHJpdmVyRGF0YVJlcXVpcmVkJykpKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGNoZWNrRHJpdmVyR3JvdXBzKF94NSwgX3g2LCBfeDcpIHsKICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGNoZWNrUHJvZHVjdEtleSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghRU5fTlVNQkVSX1JFR0VYLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodCgnY29uZmlnLmVuTnVtYmVyRm9ybWF0RXJyb3InKSkpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoID4gMTYpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0KCdjb25maWcuZW5OdW1iZXJMZW5ndGhFcnJvcicsIHsKICAgICAgICAgICAgICAgICAgbWF4OiAxNgogICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNik7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGNoZWNrUHJvZHVjdEtleShfeDgsIF94OSwgX3gxMCkgewogICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgcnVsZXMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBkcml2ZXI6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogdCgnY29uZmlnLnNvdXRoRGV2aWNlUmVxdWlyZWQnKQogICAgICB9XSwKICAgICAgZ3JvdXA6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogY3JlYXRlQ29tbW9uRXJyb3JNZXNzYWdlKCdzZWxlY3QnLCB0KCdjb25maWcuZ3JvdXAnKSkKICAgICAgfV0sCiAgICAgIGRyaXZlckdyb3VwczogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiBjcmVhdGVDb21tb25FcnJvck1lc3NhZ2UoJ3NlbGVjdCcsIHQoJ2NvbmZpZy5zdWJzY3JpYmVTb3V0aERyaXZlckRhdGEnKSkKICAgICAgfSwgewogICAgICAgIHZhbGlkYXRvcjogY2hlY2tEcml2ZXJHcm91cHMsCiAgICAgICAgdHJpZ2dlcjogWydibHVyJ10KICAgICAgfV0sCiAgICAgICdwYXJhbXMudG9waWMnOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6IGNyZWF0ZUNvbW1vbkVycm9yTWVzc2FnZSgnaW5wdXQnLCB0KCdjb25maWcudG9waWMnKSkKICAgICAgfV0sCiAgICAgIHRvcGljOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6IGNyZWF0ZUNvbW1vbkVycm9yTWVzc2FnZSgnaW5wdXQnLCB0KCdjb25maWcudG9waWMnKSkKICAgICAgfV0sCiAgICAgICdwYXJhbXMucHJvZHVjdEtleSc6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogY3JlYXRlQ29tbW9uRXJyb3JNZXNzYWdlKCdpbnB1dCcsICcgcHJvZHVjdEtleScpCiAgICAgIH0sIHsKICAgICAgICB2YWxpZGF0b3I6IGNoZWNrUHJvZHVjdEtleSwKICAgICAgICB0cmlnZ2VyOiBbJ2JsdXInXQogICAgICB9XSwKICAgICAgcHJvZHVjdEtleTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiBjcmVhdGVDb21tb25FcnJvck1lc3NhZ2UoJ2lucHV0JywgJyBwcm9kdWN0S2V5JykKICAgICAgfSwgewogICAgICAgIHZhbGlkYXRvcjogY2hlY2tQcm9kdWN0S2V5LAogICAgICAgIHRyaWdnZXI6IFsnYmx1ciddCiAgICAgIH1dCiAgICB9OwogIH0pOwogIHJldHVybiB7CiAgICBydWxlczogcnVsZXMKICB9Owp9OwpleHBvcnQgdmFyIHVzZUFkZFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIHVzZUFkZFN1YnNjcmlwdGlvbihwcm9wcykgewogIHZhciBfdXNlSTE4bjMgPSB1c2VJMThuKCksCiAgICAgIHQgPSBfdXNlSTE4bjMudDsKCiAgdmFyIF91c2VEcml2ZXJJbmZvID0gdXNlRHJpdmVySW5mbygpLAogICAgICBpc01RVFRQdWdpbiA9IF91c2VEcml2ZXJJbmZvLmlzTVFUVFB1Z2luLAogICAgICBpc0dld3VQdWdpbiA9IF91c2VEcml2ZXJJbmZvLmlzR2V3dVB1Z2luLAogICAgICBpc1N1cHBvcnRCYXRjaFN1YiA9IF91c2VEcml2ZXJJbmZvLmlzU3VwcG9ydEJhdGNoU3ViOwoKICB2YXIgY3JlYXRlUmF3U3Vic2NyaXB0aW9uRm9ybSA9IGZ1bmN0aW9uIGNyZWF0ZVJhd1N1YnNjcmlwdGlvbkZvcm0oKSB7CiAgICByZXR1cm4gewogICAgICBhcHA6IG51bGwsCiAgICAgIGRyaXZlcjogJycsCiAgICAgIGdyb3VwOiAnJywKICAgICAgZHJpdmVyR3JvdXBzOiB7fSwKICAgICAgdG9waWM6ICcnLAogICAgICBwcm9kdWN0S2V5OiAnJwogICAgfTsKICB9OwoKICB2YXIgZm9ybUNvbSA9IHJlZigpOwogIHZhciB0b3BpY1dhcm5pbmcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgd2FybmluZ0NvbnRlbnQgPSAnJzsKICAgIHZhciB0b3BpYyA9IHN1YnNjcmlwdGlvbkZvcm0udmFsdWUudG9waWM7CgogICAgaWYgKHRvcGljKSB7CiAgICAgIHZhciBpc0NvbnRhaW5XaWxkY2FyZCA9IHRvcGljLmluY2x1ZGVzKCcjJykgfHwgdG9waWMuaW5jbHVkZXMoJysnKTsKICAgICAgd2FybmluZ0NvbnRlbnQgPSBpc0NvbnRhaW5XaWxkY2FyZCA/IHQoJ2NvbmZpZy50b3BpY0NvbnRhaW5XaWxkY2FyZCcpIDogJyc7CiAgICB9CgogICAgcmV0dXJuIHdhcm5pbmdDb250ZW50OwogIH0pOwoKICB2YXIgX3VzZVN1YnNjcmlwdGlvbkdyb3VwID0gdXNlU3Vic2NyaXB0aW9uR3JvdXAoKSwKICAgICAgcnVsZXMgPSBfdXNlU3Vic2NyaXB0aW9uR3JvdXAucnVsZXM7CgogIHZhciBzdWJzY3JpcHRpb25Gb3JtID0gcmVmKGNyZWF0ZVJhd1N1YnNjcmlwdGlvbkZvcm0oKSk7CiAgdmFyIGlzU3VibWl0dGluZyA9IHJlZihmYWxzZSk7CgogIHZhciBfdXNlU291dGhEcml2ZXIgPSB1c2VTb3V0aERyaXZlcigpLAogICAgICBkZXZpY2VMaXN0ID0gX3VzZVNvdXRoRHJpdmVyLnRvdGFsU291dGhEcml2ZXJMaXN0OwoKICB2YXIgZ3JvdXBMaXN0ID0gcmVmKFtdKTsKCiAgdmFyIHNlbGVjdGVkTm9kZUNoYW5nZWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgdmFyIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uRm9ybS52YWx1ZS5ncm91cCA9ICcnOwogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkZvcm0udmFsdWUudG9waWMgPSAnJzsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5R3JvdXBMaXN0KHN1YnNjcmlwdGlvbkZvcm0udmFsdWUuZHJpdmVyKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgZ3JvdXBMaXN0LnZhbHVlID0gZGF0YTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU3KTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gc2VsZWN0ZWROb2RlQ2hhbmdlZCgpIHsKICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHNldERlZmF1bHRUb3BpYyA9IGZ1bmN0aW9uIHNldERlZmF1bHRUb3BpYygpIHsKICAgIHZhciBub2RlTmFtZSA9IHByb3BzLmN1cnJlbnROb2RlOwogICAgc3Vic2NyaXB0aW9uRm9ybS52YWx1ZS50b3BpYyA9ICIvbmV1cm9uLyIuY29uY2F0KG5vZGVOYW1lKTsKICB9OwoKICB2YXIgaW5pdEZvcm0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdWJzY3JpcHRpb25Gb3JtLnZhbHVlID0gY3JlYXRlUmF3U3Vic2NyaXB0aW9uRm9ybSgpOwogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gbmV4dFRpY2soKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBmb3JtQ29tLnZhbHVlLiRyZWZzLmZvcm0uY2xlYXJWYWxpZGF0ZSgpOwoKICAgICAgICAgICAgICBpZiAoaXNNUVRUUHVnaW4udmFsdWUpIHsKICAgICAgICAgICAgICAgIHNldERlZmF1bHRUb3BpYygpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU4KTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaW5pdEZvcm0oKSB7CiAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7IC8vIE1RVFQgfCBHZXd1IHwgZWt1aXBlciB8IHdlYnNvY2tldCB8IHNwYXJrcGx1Z2IKCgogIHZhciBiYXRjaEFkZFN1YnNjcmlwdGlvbnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYxMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgIHZhciBkYXRhLCBfc3Vic2NyaXB0aW9uRm9ybSR2YWwsIF9zdWJzY3JpcHRpb25Gb3JtJHZhbDIsIGRyaXZlckdyb3VwcywgdG9waWMsIHByb2R1Y3RLZXksIG5vZGVHcm91cHM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMDsKICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgYXBwOiBwcm9wcy5jdXJyZW50Tm9kZSwKICAgICAgICAgICAgICAgIGdyb3VwczogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9zdWJzY3JpcHRpb25Gb3JtJHZhbCA9IHN1YnNjcmlwdGlvbkZvcm0udmFsdWUsIF9zdWJzY3JpcHRpb25Gb3JtJHZhbDIgPSBfc3Vic2NyaXB0aW9uRm9ybSR2YWwuZHJpdmVyR3JvdXBzLCBkcml2ZXJHcm91cHMgPSBfc3Vic2NyaXB0aW9uRm9ybSR2YWwyID09PSB2b2lkIDAgPyB7fSA6IF9zdWJzY3JpcHRpb25Gb3JtJHZhbDIsIHRvcGljID0gX3N1YnNjcmlwdGlvbkZvcm0kdmFsLnRvcGljLCBwcm9kdWN0S2V5ID0gX3N1YnNjcmlwdGlvbkZvcm0kdmFsLnByb2R1Y3RLZXk7CiAgICAgICAgICAgICAgbm9kZUdyb3VwcyA9IE9iamVjdC5lbnRyaWVzKGRyaXZlckdyb3Vwcyk7CiAgICAgICAgICAgICAgbm9kZUdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMTEpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTIgPSBfc2xpY2VkVG9BcnJheShfcmVmMTEsIDIpLAogICAgICAgICAgICAgICAgICAgIGtleSA9IF9yZWYxMlswXSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9yZWYxMlsxXTsKCiAgICAgICAgICAgICAgICB2YXIgZHJpdmVyID0ga2V5OwogICAgICAgICAgICAgICAgdmFyIGdyb3VwTGVuID0gdmFsdWUubGVuZ3RoOwoKICAgICAgICAgICAgICAgIGlmIChncm91cExlbikgewogICAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gewogICAgICAgICAgICAgICAgICAgICAgZHJpdmVyOiBkcml2ZXIsCiAgICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNNUVRUUHVnaW4udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BpYzogdG9waWMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNHZXd1UHVnaW4udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0S2V5OiBwcm9kdWN0S2V5CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZGF0YS5ncm91cHMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBhZGRTdWJzY3JpcHRpb25zKGRhdGEpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUoKSk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQ5LnQwID0gX2NvbnRleHQ5WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQ5LnQwKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoX2NvbnRleHQ5LnQwKSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTksIG51bGwsIFtbMCwgMTBdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGJhdGNoQWRkU3Vic2NyaXB0aW9ucygpIHsKICAgICAgcmV0dXJuIF9yZWYxMC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBzdWJtaXREYXRhID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMTMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgdmFyIF9zdWJzY3JpcHRpb25Gb3JtJHZhbDMsIGRyaXZlciwgZ3JvdXAsIGRhdGE7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1Db20udmFsdWUudmFsaWRhdGUoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBpc1N1Ym1pdHRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgIF9zdWJzY3JpcHRpb25Gb3JtJHZhbDMgPSBzdWJzY3JpcHRpb25Gb3JtLnZhbHVlLCBkcml2ZXIgPSBfc3Vic2NyaXB0aW9uRm9ybSR2YWwzLmRyaXZlciwgZ3JvdXAgPSBfc3Vic2NyaXB0aW9uRm9ybSR2YWwzLmdyb3VwOwogICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBhcHA6IHByb3BzLmN1cnJlbnROb2RlLAogICAgICAgICAgICAgICAgZHJpdmVyOiBkcml2ZXIsCiAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBpZiAoIWlzU3VwcG9ydEJhdGNoU3ViLnZhbHVlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gYmF0Y2hBZGRTdWJzY3JpcHRpb25zKCk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDEzOwogICAgICAgICAgICAgIHJldHVybiBhZGRTdWJzY3JpcHRpb24oZGF0YSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIEVtcXhNZXNzYWdlLnN1Y2Nlc3ModCgnY29tbW9uLnN1Ym1pdFN1Y2Nlc3MnKSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUoKSk7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDE3OwogICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoKSk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDIwOwogICAgICAgICAgICAgIGlzU3VibWl0dGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmZpbmlzaCgyMCk7CgogICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxMCwgbnVsbCwgW1swLCAxNywgMjAsIDIzXV0pOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBzdWJtaXREYXRhKCkgewogICAgICByZXR1cm4gX3JlZjEzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgcmV0dXJuIHsKICAgIGZvcm1Db206IGZvcm1Db20sCiAgICBydWxlczogcnVsZXMsCiAgICB0b3BpY1dhcm5pbmc6IHRvcGljV2FybmluZywKICAgIHN1YnNjcmlwdGlvbkZvcm06IHN1YnNjcmlwdGlvbkZvcm0sCiAgICBkZXZpY2VMaXN0OiBkZXZpY2VMaXN0LAogICAgZ3JvdXBMaXN0OiBncm91cExpc3QsCiAgICBpc1N1Ym1pdHRpbmc6IGlzU3VibWl0dGluZywKICAgIGluaXRGb3JtOiBpbml0Rm9ybSwKICAgIHNlbGVjdGVkTm9kZUNoYW5nZWQ6IHNlbGVjdGVkTm9kZUNoYW5nZWQsCiAgICBzdWJtaXREYXRhOiBzdWJtaXREYXRhCiAgfTsKfTs="},null]}