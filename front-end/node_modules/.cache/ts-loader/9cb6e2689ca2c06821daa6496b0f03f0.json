{"remainingRequest":"/home/ulrich/neuron-dashboard/node_modules/thread-loader/dist/cjs.js!/home/ulrich/neuron-dashboard/node_modules/babel-loader/lib/index.js!/home/ulrich/neuron-dashboard/node_modules/ts-loader/index.js??ref--14-3!/home/ulrich/neuron-dashboard/src/composables/data/useDataMonitoring.ts","dependencies":[{"path":"/home/ulrich/neuron-dashboard/src/composables/data/useDataMonitoring.ts","mtime":1708521072003},{"path":"/home/ulrich/neuron-dashboard/babel.config.js","mtime":1708521072003},{"path":"/home/ulrich/neuron-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":1705331057500},{"path":"/home/ulrich/neuron-dashboard/node_modules/thread-loader/dist/cjs.js","mtime":1705331057587},{"path":"/home/ulrich/neuron-dashboard/node_modules/babel-loader/lib/index.js","mtime":1705331057465},{"path":"/home/ulrich/neuron-dashboard/node_modules/ts-loader/index.js","mtime":1705331079456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICIvaG9tZS91bHJpY2gvbmV1cm9uLWRhc2hib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS91bHJpY2gvbmV1cm9uLWRhc2hib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS91bHJpY2gvbmV1cm9uLWRhc2hib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CnZhciBfZXhjbHVkZWQgPSBbImF0dHJpYnV0ZSIsICJuYW1lIl07CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IHF1ZXJ5R3JvdXBMaXN0LCBxdWVyeVRhZ0xpc3QsIHF1ZXJ5U291dGhEcml2ZXJMaXN0IH0gZnJvbSAnQC9hcGkvY29uZmlnJzsKaW1wb3J0IHsgZ2V0TW9uaXRvcmluZ0RhdGEgfSBmcm9tICdAL2FwaS9kYXRhJzsKaW1wb3J0IHVzZVdyaXRlRGF0YUNoZWNrTlBhcnNlIGZyb20gJ0AvY29tcG9zYWJsZXMvZGF0YS91c2VXcml0ZURhdGFDaGVja05QYXJzZSc7CmltcG9ydCB7IFRhZ0F0dHJpYnV0ZVR5cGUsIFRhZ1R5cGUgfSBmcm9tICdAL3R5cGVzL2VudW1zJzsKaW1wb3J0IHsgcGFnaW5hdGUsIGxpc3RPcmRlckJ5S2V5LCBzcGxpY2VLZXl3b3JkcyB9IGZyb20gJ0AvdXRpbHMvdXRpbHMnOwppbXBvcnQgeyBjb21wdXRlZCwgb25Vbm1vdW50ZWQsIHJlZiwgb25Nb3VudGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gJ3Z1ZS1pMThuJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlVGFnVHlwZVNlbGVjdCwgdXNlVGFnQXR0cmlidXRlVHlwZVNlbGVjdCB9IGZyb20gJ0AvY29tcG9zYWJsZXMvY29uZmlnL3VzZUFkZFRhZ0NvbW1vbic7CmltcG9ydCB7IGRlYm91bmNlLCBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBFbXF4TWVzc2FnZSB9IGZyb20gJ0BlbXF4L2VtcXgtdWknOwpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCkgewogIHZhciBfdXNlSTE4biA9IHVzZUkxOG4oKSwKICAgICAgdCA9IF91c2VJMThuLnQ7CgogIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgdmFyIG5vZGVMaXN0ID0gcmVmKFtdKTsKICB2YXIgZ3JvdXBMaXN0ID0gcmVmKFtdKTsKCiAgdmFyIF91c2VUYWdUeXBlU2VsZWN0ID0gdXNlVGFnVHlwZVNlbGVjdCgpLAogICAgICBmaW5kVGFnVHlwZUxhYmVsQnlWYWx1ZSA9IF91c2VUYWdUeXBlU2VsZWN0LmZpbmRMYWJlbEJ5VmFsdWU7CgogIHZhciBzZWxlY3RlZEdyb3VwOwogIHZhciBjdXJyZW50R3JvdXAgPSBjb21wdXRlZCh7CiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLm5vZGVHcm91cE1lbW9yeTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgdmFyIG5vZGUgPSB2YWwubm9kZSwKICAgICAgICAgIGdyb3VwTmFtZSA9IHZhbC5ncm91cE5hbWU7CiAgICAgIHN0b3JlLmNvbW1pdCgnU0VUX05PREVfR1JPVVAnLCB7CiAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICBncm91cE5hbWU6IGdyb3VwTmFtZQogICAgICB9KTsKICAgIH0KICB9KTsKICB2YXIga2V5d29yZFNlYXJjaCA9IHJlZignJyk7CiAgdmFyIHNvcnRCeSA9IHJlZih7CiAgICBwcm9wOiAnJywKICAgIG9yZGVyOiAnJwogIH0pOwogIHZhciBjdXJyZW50Tm9kZU5hbWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICBpZiAoIWN1cnJlbnRHcm91cC52YWx1ZS5ub2RlKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICB2YXIgbm9kZSA9IG5vZGVMaXN0LnZhbHVlLmZpbmQoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWU7CiAgICAgIHJldHVybiBuYW1lID09PSBjdXJyZW50R3JvdXAudmFsdWUubm9kZTsKICAgIH0pOwogICAgcmV0dXJuIG5vZGUgPyBub2RlLm5hbWUgOiAnJzsKICB9KTsKICB2YXIgcGFnZUNvbnRyb2xsZXIgPSByZWYoewogICAgbnVtOiAxLAogICAgc2l6ZTogMTAwLAogICAgdG90YWw6IDAKICB9KTsKICB2YXIgdG90YWxEYXRhID0gcmVmKFtdKTsKICB2YXIgdG90YWxEYXRhQmFja3VwID0gcmVmKFtdKTsKICB2YXIgc2hvd1ZhbHVlQnlIZXhhZGVjaW1hbCA9IHJlZihmYWxzZSk7CiAgdmFyIHRhZ01zZ01hcCA9IHt9OwogIHZhciBwb2xsVGltZXI7CiAgdmFyIHdpdHRlblRhZ1RpbWVyOwogIHZhciB1cGRhdGVkID0gcmVmKERhdGUubm93KCkpOwoKICB2YXIgX3VzZVRhZ0F0dHJpYnV0ZVR5cGVTID0gdXNlVGFnQXR0cmlidXRlVHlwZVNlbGVjdCgpLAogICAgICB0YWdBdHRyVmFsdWVNYXAgPSBfdXNlVGFnQXR0cmlidXRlVHlwZVMudGFnQXR0clZhbHVlTWFwOwoKICB2YXIgX3VzZVdyaXRlRGF0YUNoZWNrTlBhID0gdXNlV3JpdGVEYXRhQ2hlY2tOUGFyc2UoKSwKICAgICAgdHJhbnNUb0hleGFkZWNpbWFsID0gX3VzZVdyaXRlRGF0YUNoZWNrTlBhLnRyYW5zVG9IZXhhZGVjaW1hbDsKCiAgdmFyIHJlU3ViQ291bnQgPSB7CiAgICBncm91cE5hbWU6IHVuZGVmaW5lZCwKICAgIGxhc3RUaW1lc3RhbXA6IDAsCiAgICBjb3VudDogMAogIH07CiAgdmFyIGlzTWFudWFsU2VsZWN0Tm9kZSA9IHJlZih0cnVlKTsKICB2YXIgdGFibGVFbXB0eVRleHQgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gIWN1cnJlbnRHcm91cC52YWx1ZS5ub2RlIHx8ICFjdXJyZW50R3JvdXAudmFsdWUuZ3JvdXBOYW1lID8gdCgnZGF0YS5zZWxlY3RHcm91cFRpcCcpIDogdCgnY29tbW9uLmVtcHR5RGF0YScpOwogIH0pOwogIHZhciB0YWJsZURhdGEgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcGFnaW5hdGUodG90YWxEYXRhLnZhbHVlLCBwYWdlQ29udHJvbGxlci52YWx1ZS5zaXplLCBwYWdlQ29udHJvbGxlci52YWx1ZS5udW0pOwogIH0pOwoKICB2YXIgc29ydERhdGFCeUtleSA9IGZ1bmN0aW9uIHNvcnREYXRhQnlLZXkoZGF0YSkgewogICAgdmFyIHByb3AgPSBkYXRhLnByb3AsCiAgICAgICAgb3JkZXIgPSBkYXRhLm9yZGVyOwoKICAgIGlmIChvcmRlciAmJiBwcm9wKSB7CiAgICAgIHZhciBzb3J0QnlPcmRlciA9IG9yZGVyLmluY2x1ZGVzKCdhc2MnKSA/ICdhc2MnIDogJ2Rlc2MnOwogICAgICBzb3J0QnkudmFsdWUub3JkZXIgPSBzb3J0QnlPcmRlcjsKICAgICAgc29ydEJ5LnZhbHVlLnByb3AgPSBwcm9wOwogICAgICB0b3RhbERhdGEudmFsdWUgPSBsaXN0T3JkZXJCeUtleSh0b3RhbERhdGEudmFsdWUsIHByb3AsIHNvcnRCeU9yZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHNvcnRCeS52YWx1ZSA9IHsKICAgICAgICBvcmRlcjogJycsCiAgICAgICAgcHJvcDogJycKICAgICAgfTsKICAgICAgdG90YWxEYXRhLnZhbHVlID0gY2xvbmVEZWVwKHRvdGFsRGF0YUJhY2t1cC52YWx1ZSk7CiAgICB9CiAgfTsKCiAgdmFyIHJlU3ViQWZ0ZXJSZXR1cm5FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBncm91cE5hbWUsIGxhc3RUaW1lc3RhbXAsIGNvdW50LCBjdXJyZW50R3JvdXBOYW1lLCBjYW5SZVN1YkFuZFJlcXVlc3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBncm91cE5hbWUgPSByZVN1YkNvdW50Lmdyb3VwTmFtZSwgbGFzdFRpbWVzdGFtcCA9IHJlU3ViQ291bnQubGFzdFRpbWVzdGFtcCwgY291bnQgPSByZVN1YkNvdW50LmNvdW50OwogICAgICAgICAgICAgIGN1cnJlbnRHcm91cE5hbWUgPSBjdXJyZW50R3JvdXAudmFsdWUuZ3JvdXBOYW1lOwogICAgICAgICAgICAgIGNhblJlU3ViQW5kUmVxdWVzdCA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGxhc3RUaW1lc3RhbXAgPCA1MDAgJiYgZ3JvdXBOYW1lID09PSBjdXJyZW50R3JvdXBOYW1lICYmIGNvdW50IDwgMykgewogICAgICAgICAgICAgICAgY2FuUmVTdWJBbmRSZXF1ZXN0ID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKERhdGUubm93KCkgLSBsYXN0VGltZXN0YW1wID4gNTAwIHx8IGdyb3VwTmFtZSAhPT0gY3VycmVudEdyb3VwTmFtZSkgewogICAgICAgICAgICAgICAgcmVTdWJDb3VudC5jb3VudCA9IDA7CiAgICAgICAgICAgICAgICByZVN1YkNvdW50Lmdyb3VwTmFtZSA9IGN1cnJlbnRHcm91cE5hbWU7CiAgICAgICAgICAgICAgICBjYW5SZVN1YkFuZFJlcXVlc3QgPSB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGNhblJlU3ViQW5kUmVxdWVzdCkgewogICAgICAgICAgICAgICAgcmVTdWJDb3VudC5jb3VudCArPSAxOwogICAgICAgICAgICAgICAgcmVTdWJDb3VudC5sYXN0VGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgIGdldFRhYmxlRGF0YSgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHJlU3ViQWZ0ZXJSZXR1cm5FcnJvcigpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGdldFNvdXRoTm9kZUxpc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBxdWVyeVNvdXRoRHJpdmVyTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIG5vZGVMaXN0LnZhbHVlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZShub2RlTGlzdC52YWx1ZSkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNzsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgbm9kZUxpc3QudmFsdWUgPSBbXTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoX2NvbnRleHQyLnQwKSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgN11dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0U291dGhOb2RlTGlzdCgpIHsKICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGdldEdyb3VwTGlzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKG5vZGVOYW1lKSB7CiAgICAgIHZhciBkYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5R3JvdXBMaXN0KG5vZGVOYW1lLnRvU3RyaW5nKCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBncm91cExpc3QudmFsdWUgPSBkYXRhOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUoZGF0YSkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gODsKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgZ3JvdXBMaXN0LnZhbHVlID0gW107CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0My50MCkpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzAsIDhdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGdldEdyb3VwTGlzdChfeCkgewogICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOyAvLyBncm91cCBub3QgZXhpc3Q6IHJlbG9hZCBncm91cCBsaXN0CgoKICB2YXIgZ3JvdXBJc0RlbGV0ZWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIHJlbG9hZCwKICAgICAgICAgIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZWxvYWQgPSBfYXJnczQubGVuZ3RoID4gMCAmJiBfYXJnczRbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzNFswXSA6IHRydWU7CiAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnZhbHVlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjdXJyZW50R3JvdXAudmFsdWUpLCB7fSwgewogICAgICAgICAgICAgICAgZ3JvdXBOYW1lOiAnJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRvdGFsRGF0YS52YWx1ZSA9IFtdOwoKICAgICAgICAgICAgICBpZiAoIShjdXJyZW50R3JvdXAudmFsdWUubm9kZSAmJiByZWxvYWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gZ2V0R3JvdXBMaXN0KGN1cnJlbnRHcm91cC52YWx1ZS5ub2RlKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ3JvdXBJc0RlbGV0ZWQoKSB7CiAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7IC8vIG5vZGUgbm90IGV4aXN0OiByZXNldCBzb21lIGRhdGEKCgogIHZhciBub2RlSXNEZWxldGVkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgIHZhciByZWxvYWQsCiAgICAgICAgICBfYXJnczUgPSBhcmd1bWVudHM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmVsb2FkID0gX2FyZ3M1Lmxlbmd0aCA+IDAgJiYgX2FyZ3M1WzBdICE9PSB1bmRlZmluZWQgPyBfYXJnczVbMF0gOiB0cnVlOwogICAgICAgICAgICAgIGN1cnJlbnRHcm91cC52YWx1ZSA9IHsKICAgICAgICAgICAgICAgIG5vZGU6ICcnLAogICAgICAgICAgICAgICAgZ3JvdXBOYW1lOiAnJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgZ3JvdXBMaXN0LnZhbHVlID0gW107CiAgICAgICAgICAgICAgdG90YWxEYXRhLnZhbHVlID0gW107CgogICAgICAgICAgICAgIGlmICghcmVsb2FkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gZ2V0U291dGhOb2RlTGlzdCgpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBub2RlSXNEZWxldGVkKCkgewogICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgZ2V0VGFnRGV0YWlsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgIHZhciBfc2VsZWN0ZWRHcm91cCwgX3NlbGVjdGVkR3JvdXAyOwoKICAgICAgdmFyIHBhcmFtcywgdGFncywgdGFnTmFtZU1hcDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISghKChfc2VsZWN0ZWRHcm91cCA9IHNlbGVjdGVkR3JvdXApICE9PSBudWxsICYmIF9zZWxlY3RlZEdyb3VwICE9PSB2b2lkIDAgJiYgX3NlbGVjdGVkR3JvdXAubm9kZSkgfHwgIXNlbGVjdGVkR3JvdXAuZ3JvdXBOYW1lKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwge30pOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHBhcmFtcyA9IHNwbGljZUtleXdvcmRzKHsKICAgICAgICAgICAgICAgIG5vZGU6IChfc2VsZWN0ZWRHcm91cDIgPSBzZWxlY3RlZEdyb3VwKSA9PT0gbnVsbCB8fCBfc2VsZWN0ZWRHcm91cDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zZWxlY3RlZEdyb3VwMi5ub2RlLAogICAgICAgICAgICAgICAgZ3JvdXA6IHNlbGVjdGVkR3JvdXAuZ3JvdXBOYW1lCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbmFtZTogc2VsZWN0ZWRHcm91cC5uYW1lCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBxdWVyeVRhZ0xpc3QocGFyYW1zKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICB0YWdzID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgdGFnTmFtZU1hcCA9IHRhZ3MubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlID0gaXRlbS5hdHRyaWJ1dGUsCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgICAgICByZXN0RGF0YSA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhpdGVtLCBfZXhjbHVkZWQpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgdGFnTmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiB0YWdBdHRyVmFsdWVNYXBbYXR0cmlidXRlXQogICAgICAgICAgICAgICAgfSwgcmVzdERhdGEpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUodGFnTmFtZU1hcCkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTYpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBnZXRUYWdEZXRhaWwoKSB7CiAgICAgIHJldHVybiBfcmVmNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBnZXRUYWJsZURhdGEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgdmFyIF9jdXJyZW50R3JvdXAkdmFsdWUsIG5vZGUsIGdyb3VwTmFtZSwgX3lpZWxkJGdldE1vbml0b3JpbmdELCBkYXRhLCBfZXJyb3IkcmVzcG9uc2UsIF9lcnJvciRyZXNwb25zZSRkYXRhLCBfZXJyb3IkcmVzcG9uc2UyLCBfZXJyb3IkcmVzcG9uc2UyJGRhdGEsIF9lcnJvciRyZXNwb25zZTMsIF9lcnJvciRyZXNwb25zZTMkZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2N1cnJlbnRHcm91cCR2YWx1ZSA9IGN1cnJlbnRHcm91cC52YWx1ZSwgbm9kZSA9IF9jdXJyZW50R3JvdXAkdmFsdWUubm9kZSwgZ3JvdXBOYW1lID0gX2N1cnJlbnRHcm91cCR2YWx1ZS5ncm91cE5hbWU7CgogICAgICAgICAgICAgIGlmICghKCFub2RlIHx8ICFncm91cE5hbWUgfHwgIWN1cnJlbnROb2RlTmFtZS52YWx1ZSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMzsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGdldE1vbml0b3JpbmdEYXRhKGN1cnJlbnROb2RlTmFtZS52YWx1ZSwgY3VycmVudEdyb3VwLnZhbHVlLmdyb3VwTmFtZSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX3lpZWxkJGdldE1vbml0b3JpbmdEID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRnZXRNb25pdG9yaW5nRC5kYXRhOwogICAgICAgICAgICAgIHVwZGF0ZWQudmFsdWUgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgIHRvdGFsRGF0YS52YWx1ZSA9ICh0YWdNc2dNYXAgfHwgW10pLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaXRlbS50eXBlTGFiZWwgPSBmaW5kVGFnVHlwZUxhYmVsQnlWYWx1ZShpdGVtLnR5cGUpOwogICAgICAgICAgICAgICAgdmFyIHRhZyA9IGRhdGEudGFncy5maW5kKGZ1bmN0aW9uIChyZWFkVGFnSXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZFRhZ0l0ZW0ubmFtZSA9PT0gaXRlbS50YWdOYW1lOwogICAgICAgICAgICAgICAgfSk7IC8vIGluIHRoZSB0YWcgbGlzdO+8jGlmIHRoZSAncmVhZCcgQVBJIGRvZXMgbm90IHJldHVybiBhIHRhZywgc2V0IGl0cyAndmFsdWUnIHRvICctJwoKICAgICAgICAgICAgICAgIHZhciByZXQgPSB0YWcgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB0YWcpIDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS50YWdOYW1lCiAgICAgICAgICAgICAgICB9LCBpdGVtKSwge30sIHsKICAgICAgICAgICAgICAgICAgdmFsdWU6ICctJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCEoJ3ZhbHVlJyBpbiByZXQpIHx8IChyZXQgPT09IG51bGwgfHwgcmV0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXQudmFsdWUpID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgcmV0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBwYWdlQ29udHJvbGxlci52YWx1ZS50b3RhbCA9IHRvdGFsRGF0YS52YWx1ZS5sZW5ndGg7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlU2hvd1ZhbHVlQnlIZXhhZGVjaW1hbENoYW5nZWQoKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgdG90YWxEYXRhQmFja3VwLnZhbHVlID0gY2xvbmVEZWVwKHRvdGFsRGF0YS52YWx1ZSk7CiAgICAgICAgICAgICAgc29ydERhdGFCeUtleShzb3J0QnkudmFsdWUpOwogICAgICAgICAgICAgIHN0YXJ0UG9sbCgpOwogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgX2NvbnRleHQ3LnQwID0gX2NvbnRleHQ3WyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICBpZiAoKF9jb250ZXh0Ny50MCA9PT0gbnVsbCB8fCBfY29udGV4dDcudDAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZXJyb3IkcmVzcG9uc2UgPSBfY29udGV4dDcudDAucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZSRkYXRhID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UkZGF0YS5lcnJvcikgPT09IDIwMTQpIHsKICAgICAgICAgICAgICAgIHJlU3ViQWZ0ZXJSZXR1cm5FcnJvcigpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKChfY29udGV4dDcudDAgPT09IG51bGwgfHwgX2NvbnRleHQ3LnQwID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlMiA9IF9jb250ZXh0Ny50MC5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZTIkZGF0YSA9IF9lcnJvciRyZXNwb25zZTIuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UyJGRhdGEuZXJyb3IpID09PSAyMDAzKSB7CiAgICAgICAgICAgICAgICBub2RlSXNEZWxldGVkKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoKF9jb250ZXh0Ny50MCA9PT0gbnVsbCB8fCBfY29udGV4dDcudDAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZXJyb3IkcmVzcG9uc2UzID0gX2NvbnRleHQ3LnQwLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlMyRkYXRhID0gX2Vycm9yJHJlc3BvbnNlMy5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UzJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZTMkZGF0YS5lcnJvcikgPT09IDIxMDYpIHsKICAgICAgICAgICAgICAgIC8vIG5lZWQgcmVsb2FkIGdyb3VwIGxpc3QKICAgICAgICAgICAgICAgIGdyb3VwSXNEZWxldGVkKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU3LCBudWxsLCBbWzMsIDE4XV0pOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBnZXRUYWJsZURhdGEoKSB7CiAgICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBpbml0UGFnZUNvbnRyb2xsZXIgPSBmdW5jdGlvbiBpbml0UGFnZUNvbnRyb2xsZXIoKSB7CiAgICBwYWdlQ29udHJvbGxlci52YWx1ZS5udW0gPSAxOwogICAgcGFnZUNvbnRyb2xsZXIudmFsdWUudG90YWwgPSAwOwogIH07CgogIHZhciBzdGFydFBvbGwgPSBmdW5jdGlvbiBzdGFydFBvbGwoKSB7CiAgICBpZiAocG9sbFRpbWVyKSB7CiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHBvbGxUaW1lcik7CiAgICB9CgogICAgcG9sbFRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0VGFibGVEYXRhKCk7CiAgICB9LCAzMDAwKTsKICB9OwoKICB2YXIgZ2V0VGFnTGlzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjkgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICB2YXIgX2N1cnJlbnRHcm91cCR2YWx1ZTIsIG5vZGUsIGdyb3VwTmFtZTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jdXJyZW50R3JvdXAkdmFsdWUyID0gY3VycmVudEdyb3VwLnZhbHVlLCBub2RlID0gX2N1cnJlbnRHcm91cCR2YWx1ZTIubm9kZSwgZ3JvdXBOYW1lID0gX2N1cnJlbnRHcm91cCR2YWx1ZTIuZ3JvdXBOYW1lOwoKICAgICAgICAgICAgICBpZiAoISghbm9kZSB8fCAhZ3JvdXBOYW1lKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cCA9IHsKICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsCiAgICAgICAgICAgICAgICBncm91cE5hbWU6IGdyb3VwTmFtZSwKICAgICAgICAgICAgICAgIG5hbWU6IGtleXdvcmRTZWFyY2gudmFsdWUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gZ2V0VGFnRGV0YWlsKCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgdGFnTXNnTWFwID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgaW5pdFBhZ2VDb250cm9sbGVyKCk7CiAgICAgICAgICAgICAgZ2V0VGFibGVEYXRhKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZSh0cnVlKSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnQwID0gX2NvbnRleHQ4WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dDgudDApKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlOCwgbnVsbCwgW1swLCAxM11dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0VGFnTGlzdCgpIHsKICAgICAgcmV0dXJuIF9yZWY5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsgLy8gZGVib3VuY2UKCgogIHZhciBkYkdldFRhZ0xpc3QgPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICBnZXRUYWdMaXN0KCk7CiAgfSwgNTAwKTsKCiAgdmFyIHdyaXR0ZW5UYWcgPSBmdW5jdGlvbiB3cml0dGVuVGFnKCkgewogICAgaWYgKHdpdHRlblRhZ1RpbWVyKSB7CiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQod2l0dGVuVGFnVGltZXIpOwogICAgfQoKICAgIHdpdHRlblRhZ1RpbWVyID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBnZXRUYWJsZURhdGEoKTsKICAgIH0sIDkwMCk7CiAgfTsKCiAgdmFyIHJlc2V0S2V5d29yZFNlYXJjaCA9IGZ1bmN0aW9uIHJlc2V0S2V5d29yZFNlYXJjaCgpIHsKICAgIGtleXdvcmRTZWFyY2gudmFsdWUgPSAnJzsKICB9OyAvLyBjaGFuZ2Ugbm9kZQoKCiAgdmFyIHNlbGVjdGVkTm9kZUNoYW5nZWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYxMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkobm9kZU5hbWUpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIW5vZGVOYW1lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDE7CiAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnZhbHVlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjdXJyZW50R3JvdXAudmFsdWUpLCB7fSwgewogICAgICAgICAgICAgICAgbm9kZTogbm9kZU5hbWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIHRvdGFsRGF0YS52YWx1ZSA9IFtdOwogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gZ2V0R3JvdXBMaXN0KGN1cnJlbnRHcm91cC52YWx1ZS5ub2RlKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXRDdXJyZW50R3JvdXBOYW1lKCk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dDkudDAgPSBfY29udGV4dDlbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgZ3JvdXBMaXN0LnZhbHVlID0gW107CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGN1cnJlbnRHcm91cC52YWx1ZSA9IHsKICAgICAgICAgICAgICAgIG5vZGU6IGN1cnJlbnRHcm91cC52YWx1ZS5ub2RlLAogICAgICAgICAgICAgICAgZ3JvdXBOYW1lOiAnJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmVzZXRLZXl3b3JkU2VhcmNoKCk7CiAgICAgICAgICAgICAgZ3JvdXBMaXN0LnZhbHVlID0gW107CiAgICAgICAgICAgICAgdG90YWxEYXRhLnZhbHVlID0gW107CiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICBpbml0UGFnZUNvbnRyb2xsZXIoKTsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlOSwgbnVsbCwgW1sxLCAxMV1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gc2VsZWN0ZWROb2RlQ2hhbmdlZChfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYxMC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7IC8vIGNoYW5nZSBncm91cAoKCiAgdmFyIHNlbGVjdGVkR3JvdXBDaGFuZ2VkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMTEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMChncm91cE5hbWUpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnZhbHVlID0gewogICAgICAgICAgICAgICAgbm9kZTogY3VycmVudEdyb3VwLnZhbHVlLm5vZGUsCiAgICAgICAgICAgICAgICBncm91cE5hbWU6IGdyb3VwTmFtZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmVzZXRLZXl3b3JkU2VhcmNoKCk7CgogICAgICAgICAgICAgIGlmICghZ3JvdXBOYW1lKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBnZXRUYWdMaXN0KCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICB0b3RhbERhdGEudmFsdWUgPSBbXTsKICAgICAgICAgICAgICBpbml0UGFnZUNvbnRyb2xsZXIoKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTApOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBzZWxlY3RlZEdyb3VwQ2hhbmdlZChfeDMpIHsKICAgICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBoYW5kbGVTaXplQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZShzaXplKSB7CiAgICBwYWdlQ29udHJvbGxlci52YWx1ZS5zaXplID0gc2l6ZTsKICAgIHBhZ2VDb250cm9sbGVyLnZhbHVlLm51bSA9IDE7CiAgfTsKCiAgdmFyIHZhbHVlVG9TaG93ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMTIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSh0YWdEYXRhKSB7CiAgICAgIHZhciB0eXBlLCB2YWx1ZSwgZXJyb3IsIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHR5cGUgPSB0YWdEYXRhLnR5cGUsIHZhbHVlID0gdGFnRGF0YS52YWx1ZSwgZXJyb3IgPSB0YWdEYXRhLmVycm9yOwoKICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIGVycm9yKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBpZiAoc2hvd1ZhbHVlQnlIZXhhZGVjaW1hbC52YWx1ZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCEoKHR5cGUgPT09IFRhZ1R5cGUuRE9VQkxFIHx8IHR5cGUgPT09IFRhZ1R5cGUuRkxPQVQpICYmIHZhbHVlID09PSAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCAnMC4wJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCB2YWx1ZSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgaWYgKCEodHlwZSA9PT0gVGFnVHlwZS5CWVRFUyB8fCB0eXBlID09PSBUYWdUeXBlLkJPT0wgfHwgdHlwZSA9PT0gVGFnVHlwZS5CSVQgfHwgdHlwZSA9PT0gVGFnVHlwZS5TVFJJTkcpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIHZhbHVlKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxMTsKICAgICAgICAgICAgICByZXR1cm4gdHJhbnNUb0hleGFkZWNpbWFsKHRhZ0RhdGEpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQxMS5zZW50OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHZhbHVlVG9TaG93KF94NCkgewogICAgICByZXR1cm4gX3JlZjEyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGhhbmRsZVNob3dWYWx1ZUJ5SGV4YWRlY2ltYWxDaGFuZ2VkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMTMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMDsKICAgICAgICAgICAgICB0b3RhbERhdGEudmFsdWUuZm9yRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMihpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlVG9TaG93KGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWVUb1Nob3cgPSBfY29udGV4dDEyLnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjE0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUodG90YWxEYXRhLnZhbHVlKSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gNTsKICAgICAgICAgICAgICBfY29udGV4dDEzLnQwID0gX2NvbnRleHQxM1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0MTMudDApKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTMsIG51bGwsIFtbMCwgNV1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlU2hvd1ZhbHVlQnlIZXhhZGVjaW1hbENoYW5nZWQoKSB7CiAgICAgIHJldHVybiBfcmVmMTMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgY2FuV3JpdGUgPSBmdW5jdGlvbiBjYW5Xcml0ZShpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5hdHRyaWJ1dGUgJiYgaXRlbS5hdHRyaWJ1dGUuc29tZShmdW5jdGlvbiAoYXR0cikgewogICAgICByZXR1cm4gYXR0ciA9PT0gVGFnQXR0cmlidXRlVHlwZS5Xcml0ZTsKICAgIH0pOwogIH07CgogIHZhciBpc05vZGVEZWxldGVkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMTUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNCgpIHsKICAgICAgdmFyIG5vZGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50R3JvdXAudmFsdWUubm9kZTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIG5vZGUgJiYgIWN1cnJlbnROb2RlTmFtZS52YWx1ZSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTE0KTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaXNOb2RlRGVsZXRlZCgpIHsKICAgICAgcmV0dXJuIF9yZWYxNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBpc0dyb3VwRGVsZXRlZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjE2ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoKSB7CiAgICAgIHZhciBncm91cE5hbWUsIGdyb3VwOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBncm91cE5hbWUgPSBjdXJyZW50R3JvdXAudmFsdWUuZ3JvdXBOYW1lOwogICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXBMaXN0LnZhbHVlLmZpbmQoZnVuY3Rpb24gKF9yZWYxNykgewogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBfcmVmMTcubmFtZTsKICAgICAgICAgICAgICAgIHJldHVybiBuYW1lID09PSBncm91cE5hbWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCBncm91cE5hbWUgJiYgIWdyb3VwKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBpc0dyb3VwRGVsZXRlZCgpIHsKICAgICAgcmV0dXJuIF9yZWYxNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7IC8vIGNoZWNrIGFuZCBpbml0IG5vZGUKCgogIHZhciBpbml0Q3VycmVudE5vZGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYxOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE2KCkgewogICAgICB2YXIgbm9kZSwgaXNUaGVOb2RlRGVsZXRlZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgbm9kZSA9IGN1cnJlbnRHcm91cC52YWx1ZS5ub2RlOwogICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGlzTm9kZURlbGV0ZWQoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBpc1RoZU5vZGVEZWxldGVkID0gX2NvbnRleHQxNi5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWlzVGhlTm9kZURlbGV0ZWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBub2RlSXNEZWxldGVkKGZhbHNlKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBpZiAoaXNNYW51YWxTZWxlY3ROb2RlLnZhbHVlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIEVtcXhNZXNzYWdlLmVycm9yKHQoJ2RhdGEubm9kZURlbGV0ZWQnKSk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGlmICghY3VycmVudEdyb3VwLnZhbHVlLm5vZGUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWROb2RlQ2hhbmdlZChub2RlKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTE2KTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaW5pdEN1cnJlbnROb2RlKCkgewogICAgICByZXR1cm4gX3JlZjE4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsgLy8gY2hlY2sgYW5kIGluaXQgZ3JvdXAKCgogIHZhciBpbml0Q3VycmVudEdyb3VwTmFtZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjE5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgIHZhciBub2RlLCBpc1RoZUdyb3VwRXhpc3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50R3JvdXAudmFsdWUubm9kZTsKICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBpc0dyb3VwRGVsZXRlZCgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGlzVGhlR3JvdXBFeGlzdCA9IF9jb250ZXh0MTcuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCFpc1RoZUdyb3VwRXhpc3QpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBncm91cElzRGVsZXRlZChmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgaWYgKGlzTWFudWFsU2VsZWN0Tm9kZS52YWx1ZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBFbXF4TWVzc2FnZS5lcnJvcih0KCdkYXRhLmdyb3VwRGVsZXRlZCcpKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgaWYgKCEobm9kZSAmJiBjdXJyZW50R3JvdXAudmFsdWUuZ3JvdXBOYW1lKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDEzOwogICAgICAgICAgICAgIHJldHVybiBnZXRUYWdMaXN0KCk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxNyk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGluaXRDdXJyZW50R3JvdXBOYW1lKCkgewogICAgICByZXR1cm4gX3JlZjE5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGluaXRUYWdMaXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMjAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOCgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gaW5pdEN1cnJlbnROb2RlKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gaW5pdEN1cnJlbnRHcm91cE5hbWUoKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTgpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBpbml0VGFnTGlzdCgpIHsKICAgICAgcmV0dXJuIF9yZWYyMC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOSQoX2NvbnRleHQxOSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOS5wcmV2ID0gX2NvbnRleHQxOS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlzTWFudWFsU2VsZWN0Tm9kZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZ2V0U291dGhOb2RlTGlzdCgpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGluaXRUYWdMaXN0KCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBpc01hbnVhbFNlbGVjdE5vZGUudmFsdWUgPSB0cnVlOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxOSk7CiAgfSkpKTsKICBvblVubW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICBpZiAocG9sbFRpbWVyKSB7CiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHBvbGxUaW1lcik7CiAgICB9CgogICAgaWYgKHdpdHRlblRhZ1RpbWVyKSB7CiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQod2l0dGVuVGFnVGltZXIpOwogICAgfQogIH0pOwogIHJldHVybiB7CiAgICBub2RlTGlzdDogbm9kZUxpc3QsCiAgICBncm91cExpc3Q6IGdyb3VwTGlzdCwKICAgIGtleXdvcmRTZWFyY2g6IGtleXdvcmRTZWFyY2gsCiAgICBjdXJyZW50R3JvdXA6IGN1cnJlbnRHcm91cCwKICAgIGN1cnJlbnROb2RlTmFtZTogY3VycmVudE5vZGVOYW1lLAogICAgcGFnZUNvbnRyb2xsZXI6IHBhZ2VDb250cm9sbGVyLAogICAgdGFibGVEYXRhOiB0YWJsZURhdGEsCiAgICBzaG93VmFsdWVCeUhleGFkZWNpbWFsOiBzaG93VmFsdWVCeUhleGFkZWNpbWFsLAogICAgdXBkYXRlZDogdXBkYXRlZCwKICAgIHRhYmxlRW1wdHlUZXh0OiB0YWJsZUVtcHR5VGV4dCwKICAgIGhhbmRsZVNob3dWYWx1ZUJ5SGV4YWRlY2ltYWxDaGFuZ2VkOiBoYW5kbGVTaG93VmFsdWVCeUhleGFkZWNpbWFsQ2hhbmdlZCwKICAgIGNhbldyaXRlOiBjYW5Xcml0ZSwKICAgIGdldFRhYmxlRGF0YTogZ2V0VGFibGVEYXRhLAogICAgZGJHZXRUYWdMaXN0OiBkYkdldFRhZ0xpc3QsCiAgICBzZWxlY3RlZE5vZGVDaGFuZ2VkOiBzZWxlY3RlZE5vZGVDaGFuZ2VkLAogICAgc2VsZWN0ZWRHcm91cENoYW5nZWQ6IHNlbGVjdGVkR3JvdXBDaGFuZ2VkLAogICAgaGFuZGxlU2l6ZUNoYW5nZTogaGFuZGxlU2l6ZUNoYW5nZSwKICAgIHNvcnREYXRhQnlLZXk6IHNvcnREYXRhQnlLZXksCiAgICB3cml0dGVuVGFnOiB3cml0dGVuVGFnCiAgfTsKfSk7"},null]}